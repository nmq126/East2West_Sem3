@model East2West.Models.User

@{
    ViewBag.Title = "Profile";
    Layout = "~/Views/Shared/_LayoutPageClient.cshtml";
}

@section Section
{

    <section class="parallax-window" data-parallax="scroll" data-image-src="https://res.cloudinary.com/tanvnth2012002/image/upload/v1655794518/hinh-nen-vinh-ha-long-quang-ninh-dep_wu3zp9.jpg" data-natural-width="1400" data-natural-height="470">
        <div class="parallax-content-1 opacity-mask" data-opacity-mask="rgba(0, 0, 0, 0.4)">
            <div class="animated fadeInDown">
                <h1>Hello @Model.LastName!</h1>
                <p>Welcome back to profile.</p>
            </div>
        </div>
    </section>
}
<main>
    <div id="position">
        <div class="container">
            <ul>
                <li>
                    <a href="#">Home</a>
                </li>
                <li>
                    <a href="#">Category</a>
                </li>
                <li>Page active</li>
            </ul>
        </div>
    </div>
    <!-- End Position -->

    <div class="collapse" id="collapseMap">
        <div id="map" class="map"></div>
    </div>
    <!-- End Map -->
    <div class="margin_60 container">
        <div id="tabs" class="tabs">
            <nav>
                <ul>
                    <li>
                        <a href="#section-1" class="icon-booking"><span>Tour Bookings</span></a>
                    </li>
                    <li>
                        <a href="#section-4" class="icon-profile"><span>Profile</span></a>
                    </li>
                </ul>
            </nav>
            <div class="content">
                <section id="section-1">
                    @foreach (var order in Model.Orders.OrderByDescending(u => u.CreatedAt))
                    {
                        <div class="strip_booking">
                            <div class="row">
                                <div class="col-lg-2 col-md-2">
                                    <div class="date">
                                        <span class="month">@order.OrderTours.First().TourDetail.DepartureDay.ToString("MMMM")</span>
                                        <span class="day"><strong>@order.OrderTours.First().TourDetail.DepartureDay.Day</strong>@order.OrderTours.First().TourDetail.DepartureDay.ToString("dddd")</span>
                                    </div>
                                </div>
                                @{
                                    float percentDiscount = ((float)order.OrderTours.First().TourDetail.Discount) / 100;
                                    var price = Math.Round(order.OrderTours.First().TourDetail.Price * (1 - percentDiscount), 2);
                                    var name = order.OrderTours.First().TourDetail.Tour.Name;
                                    var quantity = order.OrderTours.First().Quantity;

                                }
                                <div class="col-lg-5 col-md-4">
                                    @if (order.OrderTours.First().Quantity > 1)
                                    {
                                        <h3 class="tours_booking">@name<span>@quantity Persons    </span></h3>
                                    }
                                    else
                                    {
                                        <h3 class="tours_booking">@name<span>@quantity Person    </span></h3>
                                    }
                                </div>
                                <div class="col-lg-2 col-md-3">
                                    <ul class="info_booking">
                                        <li><strong>Booking id</strong> @order.Id</li>
                                        <li><strong>Booked on</strong> @order.CreatedAt</li>
                                    </ul>
                                </div>
                                <div class="col-lg-2 col-md-2">
                                    <div class="booking_buttons">
                                        @if (order.Status == -1)
                                        {
                                            <a href="/Order/PaymentWithPaypal?id=@order.Id&name=@name&price=@price&quantity=@quantity" class="btn_2 white">Payment</a>
                                            <a href="#0" class="btn_3">Cancel</a>
                                        }
                                        else if (order.Status == 1)
                                        {
                                            <a href="#0" class="btn_3" style="background-color: #f44336; color: white;">Refund</a>
                                        }
                                    </div>
                                </div>
                                <div class="col-lg-1 col-md-1">
                                    <div class="booking_buttons">
                                        @if (order.Status == -1)
                                        {
                                            <a href="#0" class="btn btn-danger">Unpaid</a>
                                        }
                                        else if (order.Status == 1)
                                        {
                                            <a href="#0" class="btn btn-success">Paid</a>
                                        }
                                    </div>
                                </div>
                            </div>
                            <!-- End row -->
                        </div>
                    }
                </section>
                <!-- End section 1 -->

                <section id="section-4">
                    <div class="row">
                        <div class="col-md-6">
                            <h4>Your profile</h4>
                            <ul id="profile_summary">
                                <li>
                                    Username <span>@Model.UserName</span>
                                </li>
                                <li>
                                    First name <span>@Model.FirstName</span>
                                </li>
                                <li>
                                    Last name <span>@Model.LastName</span>
                                </li>
                                <li>
                                    Phone number <span>@Model.PhoneNumber</span>
                                </li>

                                <li>
                                    Street address <span>@Model.Address</span>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <p>
                                <img src="@Model.Thumbnail" alt="Image" class="img-fluid styled profile_pic">
                            </p>
                        </div>
                    </div>
                    <!-- End row -->

                    <div class="divider"></div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4>Edit profile</h4>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>First name</label>
                                <input class="form-control" name="first_name" id="first_name" type="text">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Last name</label>
                                <input class="form-control" name="last_name" id="last_name" type="text">
                            </div>
                        </div>
                    </div>
                    <!-- End row -->

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Phone number</label>
                                <input class="form-control" name="email_2" id="email_2" type="text">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>
                                    Date of birth <small>(dd/mm/yyyy)</small>
                                </label>
                                <input class="form-control" name="email" id="email" type="text">
                            </div>
                        </div>
                    </div>
                    <!-- End row -->

                    <hr>
                    <div class="row">
                        <div class="col-md-12">
                            <h4>Edit address</h4>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Street address</label>
                                <input class="form-control" name="first_name" id="first_name" type="text">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>City/Town</label>
                                <input class="form-control" name="last_name" id="last_name" type="text">
                            </div>
                        </div>
                    </div>
                    <!-- End row -->

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Zip code</label>
                                <input class="form-control" name="email" id="email" type="text">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Country</label>
                                <select id="country" class="form-select" name="country">
                                    <option value="">Select...</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- End row -->

                    <hr>
                    <h4>Upload profile photo</h4>
                    <div class="form-inline upload_1">
                        <div class="form-group">
                            <input type="file" name="files[]" id="js-upload-files" multiple>
                        </div>
                        <button type="submit" class="btn_1 green" id="js-upload-submit">Upload file</button>
                    </div>
                    <!-- Drop Zone -->
                    <h5>Or drag and drop files below</h5>
                    <div class="upload-drop-zone" id="drop-zone">
                        Just drag and drop files here
                    </div>
                    <!-- Progress Bar -->
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                            <span class="sr-only">60% Complete</span>
                        </div>
                    </div>
                    <!-- Upload Finished -->
                    <div class="js-upload-finished">
                        <h5>Processed files</h5>
                        <div class="list-group">
                            <a href="#" class="list-group-item list-group-item-success"><span class="badge alert-success pull-right">Success</span>image-01.jpg</a>
                        </div>
                    </div>
                    <!-- End Hidden on mobiles -->

                    <hr>
                    <button type="submit" class="btn_1 green">Update Profile</button>
                </section>
                <!-- End section 4 -->
            </div>
            <!-- End content -->
        </div>
        <!-- End tabs -->
    </div>
    <div id="overlay"></div>
    <!-- Mask on input focus -->
</main>